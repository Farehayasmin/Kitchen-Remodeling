generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
}

model Category {
  id          String     @id @default(uuid())
  name        String     @unique
  description String?
  imageUrl    String?
  isActive    Boolean    @default(true)
  parentId    String?
  parent      Category?  @relation("CategoryTree", fields: [parentId], references: [id], onDelete: NoAction, onUpdate: NoAction)
  children    Category[] @relation("CategoryTree")
  createdAt   DateTime   @default(now())
  updatedAt   DateTime   @updatedAt
}

model user {
  id        String   @id @default(uuid())
  email     String   @unique
  password  String
  name      String
  role      String   @default("customer")
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model Product {
  id          String   @id @default(uuid())
  name        String
  sku         String   @unique
  description String?
  category    String
  price       Float
  costPrice   Float?
  unit        String   @default("piece")
  stock       Int      @default(0)
  minStock    Int      @default(0)
  supplier    String?
  brand       String?
  imageUrl    String?
  status      String   @default("active") 
  tags        String?  
  specifications String? 
  warranty    String?
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
}

model Order {
  id              String      @id @default(uuid())
  orderNumber     String      @unique
  customerId      String?
  customerName    String
  customerEmail   String
  customerPhone   String?
  customerAddress String?
  orderDate       DateTime    @default(now())
  expectedDate    DateTime?
  completionDate  DateTime?
  status          String      @default("pending")
  totalAmount     Float       @default(0)
  discount        Float       @default(0)
  tax             Float       @default(0)
  finalAmount     Float       @default(0)
  paymentStatus   String      @default("unpaid")
  paymentMethod   String?
  notes           String?
  orderItems      OrderItem[]
  createdAt       DateTime    @default(now())
  updatedAt       DateTime    @updatedAt
}

model OrderItem {
  id          String   @id @default(uuid())
  orderId     String
  order       Order    @relation(fields: [orderId], references: [id], onDelete: Cascade)
  productId   String?
  productName String
  productSku  String?
  quantity    Int
  unitPrice   Float
  totalPrice  Float
  notes       String?
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
}


